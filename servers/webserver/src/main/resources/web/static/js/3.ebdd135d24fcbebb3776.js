webpackJsonp([3],{"9bBU":function(e,t,a){a("mClu");var r=a("FeBl").Object;e.exports=function(e,t,a){return r.defineProperty(e,t,a)}},C4MV:function(e,t,a){e.exports={default:a("9bBU"),__esModule:!0}},DGkE:function(e,t){},FvVV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mvHQ"),s=a.n(r),n=a("bOdI"),i=a.n(n),o=a("Av7u"),c=a.n(o),l=a("dRPn"),d=a("mtWM"),u=a.n(d),p={data:function(){var e;return e={ruleForm:{corpName:""},more2:[],current:1,list:["首页","项目","企业","人员"],projectList:[],size:10},i()(e,"current",1),i()(e,"total",0),i()(e,"personList",[]),i()(e,"loadingInstance",null),e},components:{},mounted:function(){this.loadingInstance=this.$loading({fullscreen:!0}),this.$route.query.projectLeader&&this.getPersonnelList(),this.$route.query.aesIdCard&&this.getPersonDetail()},methods:{changheader:function(e){this.$router.push({name:"info"}),window.sessionStorage.setItem("row_guid",s()(e))},resetForm:function(e){var t=this;this.loadingInstance=this.$loading({fullscreen:!0}),this.getPersonDetail(),this.$nextTick(function(){t.$refs[e].resetFields(),t.pageIndex=1})},getPersonDetail:function(){var e=this;this.createAxiosAndGetToken(function(t){u()({url:"https://www.zhelibuild.com/ecaserver/datacenter/api/data/0007416a0d174699abb3d2a2455f6fd1/1.0/getProjectListByUserIdCard?size="+e.size+"&current="+e.current+"&aesIdCard="+(e.$route.query.aesIdCard?encodeURIComponent(e.$route.query.aesIdCard):encodeURIComponent(e.personList[0].aesIdCard)),method:"get",headers:{Authorization:"Bearer "+t+" "}}).then(function(t){e.$nextTick(function(){e.loadingInstance.close()}),e.projectList=t.data.data.records,e.total=t.data.data.total,e.projectList.forEach(function(t,a){switch(t.index=10*(e.current-1)+a+1,t.dic_code){case"01":t.dic_name="房屋建筑工程";break;case"02":t.dic_name="市政基础设施工程";break;case"03":t.dic_name="单独立项专业工程";break;case 99:t.dic_name="其他"}})})})},search2:function(){""==this.ruleForm.corpName?this.$message.error("请完善信息,信息必填！"):this.getPersonDetail1()},getPersonDetail1:function(){var e=this;this.createAxiosAndGetToken(function(t){u()({url:"https://www.zhelibuild.com/ecaserver/datacenter/api/data/0007416a0d174699abb3d2a2455f6fd1/1.0/getProjectListByUserIdCardAndProjectName?size="+e.size+"&projectName="+e.ruleForm.corpName+"&current="+e.current+"&aesIdCard="+(e.$route.query.aesIdCard?encodeURIComponent(e.$route.query.aesIdCard):encodeURIComponent(e.personList[0].aesIdCard)),method:"get",headers:{Authorization:"Bearer "+t+" "}}).then(function(t){e.$nextTick(function(){e.loadingInstance.close()}),e.projectList=t.data.data.records,console.log("this.projectLis33333",e.projectList),e.total=t.data.data.total,e.projectList.forEach(function(t,a){switch(t.index=10*(e.current-1)+a+1,t.dic_code){case"01":t.dic_name="房屋建筑工程";break;case"02":t.dic_name="市政基础设施工程";break;case"03":t.dic_name="单独立项专业工程";break;case 99:t.dic_name="其他"}})})})},getPersonnelList:function(){var e=this,t="645ffda7-fc12-4415-a237-314d87d66716",a="c9406731-50bc-4e23-b3f5-b7e7d3093875",r=(new Date).getTime().toString(),s=c.a.enc.Base64.stringify(c.a.MD5(a+t+r));u()({url:"https://www.zhelibuild.com/DataExchangeServer/monitor/queryCorpUserInfo/byConditions?size=1&current=5&userName="+this.$route.query.projectLeader+"&userIdCard="+this.$route.query.leaderCardNum,method:"get",headers:{appKey:a,time:r,sign:s,appSecret:t}}).then(function(t){console.log(t),e.personList=t.data.data,e.total=t.data.total,e.personList.forEach(function(e,t){e.password=Object(l.a)(e.aesIdCard),""!=e.password&&(e.password=e.password.replaceAll(e.password.substring(4,16),"************"))}),e.getPersonDetail()})},handleSizeChange:function(e){this.size=e,this.getPersonDetail(),console.log("每页 "+e+" 条")},handleCurrentChange:function(e){this.current=e,this.loadingInstance=this.$loading({fullscreen:!0}),this.getPersonDetail(),console.log("当前页: "+e)},toIndex:function(e){2==e?this.$router.push({name:"list"}):this.$router.push({name:"index",params:{id:e}})},createAxiosAndGetToken:function(e){var t=this;this.service=u.a.create({baseURL:"https://www.zhelibuild.com",timeout:18e4,headers:{Authorization:""}}),this.service.get("/ecaserver/auth/oauth/token?grant_type=client_credentials&scope=server",{headers:{isToken:!1,Authorization:"Basic emhlbGlidWlsZDo4MjBkYjIwMy04OTY2LTQ0MjktYWNiYS0yZjFiNDIyN2Y2OTI="}}).then(function(a){e(a.data.access_token),t.service.headers.Authorization="Bearer "+a.data.access_token+" "}).catch(function(e){})}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex_center_wrap"},[a("div",{staticClass:"header flex_center"},[a("div",{staticClass:"header-wrap flex_between"},[e._m(0),e._v(" "),a("div",{staticClass:"header-right flex_center"},e._l(e.list,function(t,r){return a("div",{key:r,on:{click:function(t){return e.toIndex(r+1)}}},[e._v("\n          "+e._s(t)+"\n          "),a("div",{class:[3==r?"b-bottom":""]})])}),0)])]),e._v(" "),a("div",{staticClass:"content"},[e._m(1),e._v(" "),a("div",{staticClass:"top-title align_center"},[a("div"),e._v(" "),a("div",[e._v("\n        "+e._s(e.$route.query.PROJECT_LEADER?e.$route.query.PROJECT_LEADER:e.personList[0].PROJECT_LEADER)+"\n        "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.$route.query.LEADER_CARD_NUM?e.$route.query.LEADER_CARD_NUM:e.personList[0].password))])])]),e._v(" "),e._m(2),e._v(" "),a("table",{staticStyle:{"line-height":"60px","margin-bottom":"31px","border-radius":"10px","margin-top":"22px"},attrs:{cellpadding:"0",cellspacing:"0"}},[a("col",{attrs:{width:"248px"}}),e._v(" "),a("col",{attrs:{width:"248px"}}),e._v(" "),a("col",{attrs:{width:"248px"}}),e._v(" "),a("col",{attrs:{width:"248px"}}),e._v(" "),a("col",{attrs:{width:"248px"}}),e._v(" "),a("col",{attrs:{width:"248px"}}),e._v(" "),a("tr",[a("td",{staticClass:"title"},[e._v("姓名")]),e._v(" "),a("td",{staticClass:"text",attrs:{colspan:"2"}},[e._v("\n          "+e._s(e.$route.query.PROJECT_LEADER?e.$route.query.PROJECT_LEADER:e.personList[0].PROJECT_LEADER)+"\n        ")]),e._v(" "),a("td",{staticClass:"title"},[e._v("性别")]),e._v(" "),a("td",{staticClass:"text",attrs:{colspan:"2"}},[e._v("\n          "+e._s(e.$route.query.userSex?e.$route.query.userSex:e.personList[0].userSex)+"\n        ")])]),e._v(" "),a("tr",[a("td",{staticClass:"title"},[e._v("身份证号")]),e._v(" "),a("td",{staticClass:"text",attrs:{colspan:"2"}},[e._v("\n          "+e._s(e.$route.query.LEADER_CARD_NUM?e.$route.query.LEADER_CARD_NUM:e.personList[0].password)+"\n        ")]),e._v(" "),a("td",{staticClass:"title"},[e._v("参建项目数")]),e._v(" "),a("td",{staticClass:"text",attrs:{colspan:"2"}},[e._v("\n          "+e._s(e.$route.query.manageNum?e.$route.query.manageNum:e.personList[0].manageNum)+"\n        ")])])]),e._v(" "),a("div",{staticClass:"align_center align_center1"},[e._m(3),e._v(" "),a("div",{staticClass:"align_center1"},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm}},[a("el-form-item",{attrs:{prop:"corpName",label:"项目名称","label-width":"130px"}},[a("el-input",{attrs:{prop:"corpName",placeholder:"请输入项目名称"},model:{value:e.ruleForm.corpName,callback:function(t){e.$set(e.ruleForm,"corpName",t)},expression:"ruleForm.corpName"}})],1)],1),e._v(" "),a("div",{staticStyle:{"padding-top":"4px"}},[a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",value:"查询",size:"small"},on:{click:function(t){return e.search2()}}},[e._v("立即查询\n          ")]),e._v(" "),a("el-button",{staticClass:"reset",attrs:{plain:"",type:"reset",size:"small"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("立即重置")])],1)],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.projectList,border:!0,"header-cell-style":{"background-color":"#F3F5F9",color:"#333333","font-weight":"bold"}}},[a("el-table-column",{attrs:{align:"center",label:"序号",width:"50",prop:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"project_name",align:"center",label:"项目名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{color:"#184894",cursor:"pointer"},on:{click:function(a){return e.changheader(t.row)}}},[e._v("\n            "+e._s(t.row.project_name)+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"build_license_num",align:"center",label:"施工许可证编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dic_name",align:"center",label:"工程类型"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"地市-区县"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.city_name+"-"+t.row.county_name)+"\n        ")]}}])})],1),e._v(" "),a("div",{staticClass:"flex_center",staticStyle:{"margin-top":"40px","margin-bottom":"80px"}},[a("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header-left flex align_center"},[t("img",{attrs:{src:a("Vjmi"),alt:""}}),this._v(" "),t("div",{staticClass:"border"}),this._v(" "),t("span",{staticClass:"header-title"},[this._v("工程建设项目信息发布")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{margin:"20px 0"}},[t("span",{staticStyle:{color:"#999999"}},[this._v("人员")]),this._v(" "),t("span",{staticStyle:{margin:"0 9px"}},[this._v(">")]),this._v(" "),t("span",[this._v("人员详情")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"align_center"},[t("img",{staticStyle:{width:"22px",height:"20px"},attrs:{src:a("unOY"),alt:""}}),this._v(" "),t("span",{staticStyle:{"font-weight":"bold","margin-left":"2px"}},[this._v("基本信息")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("img",{staticStyle:{width:"22px",height:"20px"},attrs:{src:a("unOY"),alt:""}}),this._v(" "),t("span",{staticStyle:{"font-weight":"bold","margin-left":"2px"}},[this._v("项目信息列表")])])}]};var _=a("VU/8")(p,h,!1,function(e){a("DGkE")},"data-v-8431a37c",null);t.default=_.exports},bOdI:function(e,t,a){"use strict";t.__esModule=!0;var r,s=a("C4MV"),n=(r=s)&&r.__esModule?r:{default:r};t.default=function(e,t,a){return t in e?(0,n.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},mClu:function(e,t,a){var r=a("kM2E");r(r.S+r.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})}});