webpackJsonp([11],{"+fMq":function(e,t,a){"use strict";(function(e){var r=a("Osha"),l=(a("IcnI"),a("mtWM")),s=a.n(l),i=a("n5Qe"),n=a("mw3O"),o=a.n(n);t.a={name:"witness",components:{bread:r.a},beforeRouteLeave:function(e,t,a){"witnessDetail"===e.name?this.$store.commit("setKeepAlive",["witness"]):this.$store.commit("setKeepAlive",[]),a()},data:function(){return{CORPNAME1:"",CurrentPage:1,breadlist:"",slideDown:!0,type:1,companyType:1,Count:0,page:0,PageSize:15,tableData:[],ruleForm:{PrjName:null,CensorTypeNum:null,DesignCorpName:null,PrjLevelNum:null,BuildCorpName:null,Address:null,BDate:null,EDate:null,PrjLevelNum_options:[{VALUE:"201",LABEL:"甲级"},{VALUE:"202",LABEL:"乙级"},{VALUE:"203",LABEL:"丙级"},{VALUE:"321",LABEL:"大型"},{VALUE:"322",LABEL:"中型"},{VALUE:"323",LABEL:"小型"}],CensorTypeNum_options:[{VALUE:"002",LABEL:"市政工程"},{VALUE:"003",LABEL:"房屋建筑"}]}}},methods:{resetForm:function(e){var t=this;this.$nextTick(function(){t.$refs[e].resetFields()})},search:function(){var e=this.ruleForm;e.PrjName=""==e.PrjName?null:e.PrjName,e.CensorTypeNum=""==e.CensorTypeNum?null:e.CensorTypeNum,e.DesignCorpName=""==e.DesignCorpName?null:e.DesignCorpName,e.PrjLevelNum=""==e.PrjLevelNum?null:e.PrjLevelNum,e.BuildCorpName=""==e.BuildCorpName?null:e.BuildCorpName,e.Address=""==e.Address?null:e.Address,e.BDate=""==e.BDate?null:e.BDate,e.EDate=""==e.EDate?null:e.EDate,this.CurrentPage=1,this.CORPNAME1=null,this.GetReconnaissanceList()},handleCurrentChange:function(e){this.CurrentPage=e,this.GetReconnaissanceList()},sliderUp:function(t){"1"==t?(this.slideDown=!0,e(".searchBox").find("dd").slideUp()):(this.slideDown=!1,e(".searchBox").find("dd").slideDown())},searchCompany:function(){this.CORPNAME1;this.CurrentPage=1,this.GetReconnaissanceList()},GetReconnaissanceList:function(){var e=this,t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.5)",target:document.querySelector(".companyList")}),a={PrjName:e.ruleForm.PrjName,CensorTypeNum:e.ruleForm.CensorTypeNum,DesignCorpName:e.ruleForm.DesignCorpName,BuildCorpName:e.ruleForm.BuildCorpName,PrjLevelNum:e.ruleForm.PrjLevelNum,Address:e.ruleForm.Address,BDate:e.ruleForm.BDate,EDate:e.ruleForm.EDate,CurrentPage:e.CurrentPage,PageSize:15,CORPNAME1:e.CORPNAME1};s.a.post(i.a.api.GetReconnaissanceList,o.a.stringify(a)).then(function(a){var r=a.data;r.Success?(r.Data.forEach(function(e){if(void 0!=e.EDate||null!=e.EDate){var t=e.EDate.substr(0,10);e.EDate=t}if(void 0!=e.BDate||null!=e.EDate){var a=e.BDate.substr(0,10);e.BDate=a}if(void 0!=e.CreateDateTime||null!=e.EDate){var r=e.CreateDateTime.substr(0,10);e.CreateDateTime=r}}),e.tableData=r.Data,e.Count=r.Count,r.Count>600?e.page=600:e.page=r.Count,t.close()):(t.close(),i.a.errorMeaage(r.MsgID))}).catch(function(e){i.a.errorMeaage(e.response.status,e.response.data.msg),t.close()})}},mounted:function(){this.GetReconnaissanceList()},created:function(){},watch:{CORPNAME1:function(e){""==e&&(this.CORPNAME1=null)}}}}).call(t,a("7t+N"))},N4Gv:function(e,t){},sPrH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("+fMq"),l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("div",{staticClass:"w1200"},[a("bread")],1)]),e._v(" "),a("div",{staticClass:"searchBox"},[a("dl",{staticClass:"w1200"},[a("dt",[a("ul",{staticClass:"clear-fix"},[a("li",{class:["1"==e.companyType?"cur":""],on:{click:function(t){return e.companySwitch(1)}}},[e._v("\n            外业见证查询\n          ")])]),e._v(" "),e.slideDown?e._e():a("span",{staticClass:"up",on:{click:function(t){return e.sliderUp(1)}}},[e._v("收回")]),e._v(" "),e.slideDown?a("span",{on:{click:function(t){return e.sliderUp(2)}}},[e._v("展开")]):e._e()]),e._v(" "),a("dd",{staticClass:"searchMain",staticStyle:{display:"none"}},[1==e.companyType?a("div",{staticClass:"box"},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,id:"isForm",onsubmit:"return false;"}},[a("div",{staticClass:"conditions"},[a("ul",[a("li",{staticClass:"w430 citys",staticStyle:{width:"700px"}},[a("el-form-item",{attrs:{label:"工程名称：",prop:"PrjName","label-width":"135px"}},[a("el-input",{attrs:{placeholder:"请输入工程名称"},model:{value:e.ruleForm.PrjName,callback:function(t){e.$set(e.ruleForm,"PrjName",t)},expression:"ruleForm.PrjName"}})],1)],1),e._v(" "),a("li",{staticStyle:{width:"410px"}},[a("el-form-item",{attrs:{label:"工程类别：",prop:"CensorTypeNum","label-width":"135px"}},[a("el-select",{attrs:{placeholder:"请选择工程类别"},model:{value:e.ruleForm.CensorTypeNum,callback:function(t){e.$set(e.ruleForm,"CensorTypeNum",t)},expression:"ruleForm.CensorTypeNum"}},e._l(e.ruleForm.CensorTypeNum_options,function(e,t){return a("el-option",{key:t,attrs:{label:e.LABEL,value:e.VALUE}})}),1)],1)],1),e._v(" "),a("li",{staticClass:"w430 citys",staticStyle:{width:"700px"}},[a("el-form-item",{attrs:{label:"勘察企业：",prop:"DesignCorpName","label-width":"135px"}},[a("el-input",{attrs:{placeholder:"请输入勘察企业"},model:{value:e.ruleForm.DesignCorpName,callback:function(t){e.$set(e.ruleForm,"DesignCorpName",t)},expression:"ruleForm.DesignCorpName"}})],1)],1),e._v(" "),a("li",{staticStyle:{width:"410px"}},[a("el-form-item",{attrs:{label:"工程等级：",prop:"PrjLevelNum","label-width":"135px"}},[a("el-select",{attrs:{placeholder:"请选择工程等级"},model:{value:e.ruleForm.PrjLevelNum,callback:function(t){e.$set(e.ruleForm,"PrjLevelNum",t)},expression:"ruleForm.PrjLevelNum"}},e._l(e.ruleForm.PrjLevelNum_options,function(e,t){return a("el-option",{key:t,attrs:{label:e.LABEL,value:e.VALUE}})}),1)],1)],1),e._v(" "),a("li",{staticClass:"w430 citys",staticStyle:{width:"700px"}},[a("el-form-item",{attrs:{label:"建设单位：",prop:"BuildCorpName","label-width":"135px"}},[a("el-input",{attrs:{placeholder:"请输入建设单位"},model:{value:e.ruleForm.BuildCorpName,callback:function(t){e.$set(e.ruleForm,"BuildCorpName",t)},expression:"ruleForm.BuildCorpName"}})],1)],1),e._v(" "),a("li",{staticStyle:{width:"410px"}},[a("el-form-item",{attrs:{label:"工程属地：",prop:"Address","label-width":"135px"}},[a("el-input",{attrs:{placeholder:"请输入工程所在地"},model:{value:e.ruleForm.Address,callback:function(t){e.$set(e.ruleForm,"Address",t)},expression:"ruleForm.Address"}})],1)],1),e._v(" "),a("li",{staticStyle:{width:"650px","padding-left":"50px"}},[a("el-form-item",{attrs:{label:"外业计划开工日期：",prop:"BDate","label-width":"135px"}},[a("el-date-picker",{attrs:{format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",type:"date",placeholder:"请输入开工日期"},model:{value:e.ruleForm.BDate,callback:function(t){e.$set(e.ruleForm,"BDate",t)},expression:"ruleForm.BDate"}})],1)],1),e._v(" "),a("li",{staticStyle:{width:"410px"}},[a("el-form-item",{attrs:{label:"外业计划结束日期：",prop:"EDate","label-width":"135px"}},[a("el-date-picker",{attrs:{type:"date",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",placeholder:"请输入结束日期"},model:{value:e.ruleForm.EDate,callback:function(t){e.$set(e.ruleForm,"EDate",t)},expression:"ruleForm.EDate"}})],1)],1)])]),e._v(" "),a("div",{staticClass:"isForm_bottom"},[a("button",{staticClass:"reset",attrs:{type:"reset"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("\n                重置条件\n              ")]),e._v(" "),a("input",{staticClass:"submit",attrs:{type:"submit",value:"查询"},on:{click:function(t){return e.search()}}})])])],1):e._e()]),e._v(" "),1==e.slideDown?a("dd",{staticClass:"searchKeyWord"},[a("div",{staticClass:"clear-fix"},[a("el-input",{staticClass:"keyWord",attrs:{placeholder:"请输入工程名称或勘察企业"},model:{value:e.CORPNAME1,callback:function(t){e.CORPNAME1=t},expression:"CORPNAME1"}}),e._v(" "),a("button",{on:{click:function(t){return e.searchCompany()}}},[e._v("搜索")])],1)]):e._e()])]),e._v(" "),1==e.companyType?a("div",{staticClass:"companyList w1200"},[e._m(0),e._v(" "),a("div",{staticClass:"table table1"},[a("div",{staticClass:"tableHead"},[a("h2",[e._v("\n          查询结果共\n          "),a("span",[e._v(e._s(e.Count))]),e._v("项信息\n        ")]),e._v(" "),a("div",{staticClass:"headPage",staticStyle:{float:"right"}},[a("el-pagination",{attrs:{"current-page":e.CurrentPage,"page-sizes":[15,30,40,400],"page-size":15,layout:"prev, pager, next, jumper",total:e.page},on:{"current-change":e.handleCurrentChange}})],1)]),e._v(" "),[a("vxe-table",{staticStyle:{width:"100%","text-align":"center",border:"0.5px solid rgba(234, 238, 234, 0.849) !important"},attrs:{"row-config":{isHover:!0},border:"",data:e.tableData,"seq-config":{startIndex:(e.CurrentPage-1)*e.PageSize},align:"center","header-align":"center","header-cell-style":{background:"#f5f5f5",color:"#606266",fontSize:"13px"}}},[a("vxe-column",{attrs:{width:"50",title:"序号",type:"seq"}}),e._v(" "),a("vxe-column",{attrs:{title:"工程名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{staticStyle:{color:"#1577ff"},attrs:{tag:"a",to:{name:"witnessDetail",query:{CorpCode:t.row.ServerPrjNum}}}},[e._v(e._s(t.row.PrjName))])]}}],null,!1,200643387)}),e._v(" "),a("vxe-column",{attrs:{field:"CreateDateTime",title:"上报时间"}}),e._v(" "),a("vxe-column",{attrs:{field:"Address",title:"工程所在地"}}),e._v(" "),a("vxe-column",{attrs:{field:"DesignCorpName",title:"勘察企业（K）"}}),e._v(" "),a("vxe-column",{attrs:{field:"BuildCorpName",title:"建设单位（J）"}}),e._v(" "),a("vxe-column",{attrs:{field:"CensorTypeName",title:"工程类别"}}),e._v(" "),a("vxe-column",{attrs:{field:"PrjLevelName",title:"工程等级"}}),e._v(" "),a("vxe-column",{attrs:{field:"BDate",title:"外业计划开工日期"}}),e._v(" "),a("vxe-column",{attrs:{field:"EDate",title:"外业计划结束日期"}})],1)],e._v(" "),a("div",{staticClass:"pages"},[e.Count>600?a("span",{staticStyle:{"line-height":"32px",display:"inline-block"}},[e._v("\n          仅展示前600条")]):e._e(),e._v(" "),a("el-pagination",{attrs:{"current-page":e.CurrentPage,"page-sizes":[15,30,40,400],"page-size":15,layout:" prev, pager, next, jumper",total:e.page},on:{"current-change":e.handleCurrentChange}})],1)],2)]):e._e()])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tab clear-fix"},[t("span",[this._v("信息列表")])])}]};var s=function(e){a("N4Gv")},i=a("VU/8")(r.a,l,!1,s,"data-v-6a3cf511",null);t.default=i.exports}});