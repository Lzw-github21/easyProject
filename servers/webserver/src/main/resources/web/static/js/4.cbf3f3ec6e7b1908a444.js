webpackJsonp([4],{"3F+D":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("mvHQ"),n=r.n(a),i=r("bOdI"),s=r.n(i),o=r("Av7u"),c=r.n(o),l=r("mtWM"),u=r.n(l),d={data:function(){var e;return e={ruleForm:{corpCode:"",projectName:""},more2:[],current:1,list:["首页","项目","企业","人员"],projectList:[],size:10},s()(e,"current",1),s()(e,"total",0),s()(e,"eMsg",[]),s()(e,"loadingInstance",null),e},components:{},mounted:function(){this.loadingInstance=this.$loading({fullscreen:!0}),this.getEnterpriseDetail(),this.$route.query.corpName&&this.getEnterpriseList()},methods:{search1:function(){""==this.ruleForm.projectName?this.$message.error("请完善信息,信息必填！"):this.getSelectProject()},resetForm:function(e){var t=this;this.loadingInstance=this.$loading({fullscreen:!0}),this.getEnterpriseDetail(),this.$nextTick(function(){t.$refs[e].resetFields(),t.pageIndex=1})},changheader:function(e){this.$router.push({name:"info"}),window.sessionStorage.setItem("row_guid",n()(e))},getEnterpriseDetail:function(){var e=this;this.createAxiosAndGetToken(function(t){u()({url:"https://www.zhelibuild.com/ecaserver/datacenter/api/data/0007416a0d174699abb3d2a2455f6fd1/1.0/getProjectInfoListByCorpCode?size="+e.size+"&current="+e.current+"&corpCode="+(e.$route.query.corp_code?e.$route.query.corp_code:e.$route.query.corpCode),method:"get",headers:{Authorization:"Bearer "+t+" "}}).then(function(t){e.$nextTick(function(){e.loadingInstance.close()}),e.projectList=t.data.data.records,e.total=t.data.data.total,e.projectList.forEach(function(t,r){switch(t.index=10*(e.current-1)+r+1,t.dic_code){case"01":t.dic_name="房屋建筑工程";break;case"02":t.dic_name="市政基础设施工程";break;case"03":t.dic_name="单独立项专业工程";break;case 99:t.dic_name="其他"}})})})},getEnterpriseList:function(){var e=this,t="645ffda7-fc12-4415-a237-314d87d66716",r="c9406731-50bc-4e23-b3f5-b7e7d3093875",a=(new Date).getTime().toString(),n=c.a.enc.Base64.stringify(c.a.MD5(r+t+a));u()({url:"https://www.zhelibuild.com/dataexchangeserver/plus/resources/query/getProjectListByCorpCodeOrName?pageSize="+this.size+"&pageIndex="+this.current+"&corpName="+this.$route.query.corpName+"&corpCode="+this.$route.query.corpCode+"\n          ",method:"get",headers:{appKey:r,time:a,sign:n,appSecret:t}}).then(function(t){e.eMsg=t.data.data,console.log("eMsg",e.eMsg)})},getSelectProject:function(){var e=this;this.createAxiosAndGetToken(function(t){u()({url:"https://www.zhelibuild.com/ecaserver/datacenter/api/data/0007416a0d174699abb3d2a2455f6fd1/1.0/getProjectListByCorpCodeOrNameAndProjectName?size="+e.size+"&current="+e.current+"&corpCode="+(e.$route.query.corp_code?e.$route.query.corp_code:e.$route.query.corpCode)+"&projectName="+e.ruleForm.projectName,method:"get",headers:{Authorization:"Bearer "+t+" "}}).then(function(t){e.projectList=t.data.data.records,e.total=t.data.data.total,e.projectList.forEach(function(t,r){switch(t.index=10*(e.current-1)+r+1,t.dic_code){case"01":t.dic_name="房屋建筑工程";break;case"02":t.dic_name="市政基础设施工程";break;case"03":t.dic_name="单独立项专业工程";break;case 99:t.dic_name="其他"}})})})},handleSizeChange:function(e){this.size=e,this.getEnterpriseDetail(),console.log("每页 "+e+" 条")},handleCurrentChange:function(e){this.current=e,this.loadingInstance=this.$loading({fullscreen:!0}),this.getEnterpriseDetail(),console.log("当前页: "+e)},toIndex:function(e){2==e?this.$router.push({name:"list"}):this.$router.push({name:"index",params:{id:e}})},createAxiosAndGetToken:function(e){var t=this;this.service=u.a.create({baseURL:"https://www.zhelibuild.com",timeout:18e4,headers:{Authorization:""}}),this.service.get("/ecaserver/auth/oauth/token?grant_type=client_credentials&scope=server",{headers:{isToken:!1,Authorization:"Basic emhlbGlidWlsZDo4MjBkYjIwMy04OTY2LTQ0MjktYWNiYS0yZjFiNDIyN2Y2OTI="}}).then(function(r){e(r.data.access_token),t.service.headers.Authorization="Bearer "+r.data.access_token+" "}).catch(function(e){})}}},p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex_center_wrap"},[r("div",{staticClass:"header flex_center"},[r("div",{staticClass:"header-wrap flex_between"},[e._m(0),e._v(" "),r("div",{staticClass:"header-right flex_center"},e._l(e.list,function(t,a){return r("div",{key:a,on:{click:function(t){return e.toIndex(a+1)}}},[e._v("\n          "+e._s(t)+"\n          "),r("div",{class:[2==a?"b-bottom":""]})])}),0)])]),e._v(" "),r("div",{staticClass:"content"},[e._m(1),e._v(" "),r("div",{staticClass:"top-title align_center"},[r("div"),e._v(" "),r("div",[e._v("\n        "+e._s(e.$route.query.corp_name?e.$route.query.corp_name:e.$route.query.corpName)+"\n      ")])]),e._v(" "),e._m(2),e._v(" "),r("table",{staticStyle:{"line-height":"60px","margin-bottom":"31px","border-radius":"10px","margin-top":"22px"},attrs:{cellpadding:"0",cellspacing:"0"}},[r("col",{attrs:{width:"248px"}}),e._v(" "),r("col",{attrs:{width:"248px"}}),e._v(" "),r("col",{attrs:{width:"248px"}}),e._v(" "),r("col",{attrs:{width:"248px"}}),e._v(" "),r("col",{attrs:{width:"248px"}}),e._v(" "),r("col",{attrs:{width:"248px"}}),e._v(" "),r("tr",[r("td",{staticClass:"title"},[e._v("企业名称")]),e._v(" "),r("td",{staticClass:"text",attrs:{colspan:"2"}},[e._v("\n          "+e._s(e.$route.query.corp_name?e.$route.query.corp_name:e.$route.query.corpName)+"\n        ")]),e._v(" "),r("td",{staticClass:"title"},[e._v("企业统一信用代码")]),e._v(" "),r("td",{staticClass:"text",attrs:{colspan:"2"}},[e._v("\n          "+e._s(e.$route.query.corp_code?e.$route.query.corp_code:e.$route.query.corpCode)+"\n        ")])]),e._v(" "),r("tr",[r("td",{staticClass:"title"},[e._v("所属省份")]),e._v(" "),r("td",{staticClass:"text",attrs:{colspan:"2"}},[e._v("\n          "+e._s(e.$route.query.provinceCode?e.$route.query.provinceCode:this.eMsg[0].provinceCode)+"\n        ")]),e._v(" "),r("td",{staticClass:"title"},[e._v("参建项目数")]),e._v(" "),r("td",{staticClass:"text",attrs:{colspan:"2"}},[e._v("\n          "+e._s(e.$route.query.total?e.$route.query.total:this.eMsg[0].total)+"\n        ")])])]),e._v(" "),r("div",{staticClass:"align_center align_center1"},[e._m(3),e._v(" "),r("div",{staticClass:"align_center1"},[r("el-form",{ref:"ruleForm",staticClass:"align_center",attrs:{model:e.ruleForm}},[r("el-form-item",{staticStyle:{"margin-bottom":"0px !important"},attrs:{prop:"projectName",label:"项目名称","label-width":"130px"}},[r("el-input",{attrs:{prop:"projectName",placeholder:"请输入项目名称"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName",t)},expression:"ruleForm.projectName"}})],1)],1),e._v(" "),r("div",{staticStyle:{"padding-top":"4px"}},[r("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",value:"查询",size:"small"},on:{click:function(t){return e.search1()}}},[e._v("立即查询")]),e._v(" "),r("el-button",{staticClass:"reset",attrs:{plain:"",type:"reset",size:"small"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("立即重置")])],1)],1)]),e._v(" "),r("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.projectList,border:!0,"header-cell-style":{"background-color":"#F3F5F9",color:"#333333","font-weight":"bold"}}},[r("el-table-column",{attrs:{align:"center",label:"序号",width:"50",prop:"index"}}),e._v(" "),r("el-table-column",{attrs:{prop:"project_name",align:"center",label:"项目名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticStyle:{color:"#184894",cursor:"pointer"},on:{click:function(r){return e.changheader(t.row)}}},[e._v("\n            "+e._s(t.row.project_name)+"\n          ")])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"build_license_num",align:"center",label:"施工许可证编号"}}),e._v(" "),r("el-table-column",{attrs:{prop:"dic_name",align:"center",label:"工程类型"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"地市-区县"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.city_name+"-"+t.row.county_name)+"\n        ")]}}])})],1),e._v(" "),r("div",{staticClass:"flex_center",staticStyle:{"margin-top":"40px","margin-bottom":"80px"}},[r("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header-left flex align_center"},[t("img",{attrs:{src:r("Vjmi"),alt:""}}),this._v(" "),t("div",{staticClass:"border"}),this._v(" "),t("span",{staticClass:"header-title"},[this._v("工程建设项目信息发布")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{margin:"20px 0"}},[t("span",{staticStyle:{color:"#999999"}},[this._v("企业")]),this._v(" "),t("span",{staticStyle:{margin:"0 9px"}},[this._v(">")]),this._v(" "),t("span",[this._v("企业详情")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"align_center"},[t("img",{staticStyle:{width:"22px",height:"20px"},attrs:{src:r("unOY"),alt:""}}),this._v(" "),t("span",{staticStyle:{"font-weight":"bold","margin-left":"2px"}},[this._v("基本信息")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("img",{staticStyle:{width:"22px",height:"20px"},attrs:{src:r("unOY"),alt:""}}),this._v(" "),t("span",{staticStyle:{"font-weight":"bold","margin-left":"2px"}},[this._v("项目信息列表")])])}]};var h=r("VU/8")(d,p,!1,function(e){r("PKwQ")},"data-v-431430e4",null);t.default=h.exports},"9bBU":function(e,t,r){r("mClu");var a=r("FeBl").Object;e.exports=function(e,t,r){return a.defineProperty(e,t,r)}},C4MV:function(e,t,r){e.exports={default:r("9bBU"),__esModule:!0}},PKwQ:function(e,t){},bOdI:function(e,t,r){"use strict";t.__esModule=!0;var a,n=r("C4MV"),i=(a=n)&&a.__esModule?a:{default:a};t.default=function(e,t,r){return t in e?(0,i.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},mClu:function(e,t,r){var a=r("kM2E");a(a.S+a.F*!r("+E39"),"Object",{defineProperty:r("evD5").f})}});